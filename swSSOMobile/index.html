<!DOCTYPE html> 
<html manifest="./swsso.appcache"> 
<head> 
	<title>swSSO</title> 
	<link rel="shortcut icon" href="#" />
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="apple-touch-icon" href="./apple-touch-icon.png">
	<link rel="stylesheet" href="./jquery/jquery.mobile-1.4.5.min.css" />
	<script src="./jquery/jquery.min.js"></script>
	<script src="./jquery/jquery.mobile-1.4.5.min.js"></script>
	<script src="./sjcl/sjcl.js"></script>
	<script src="./swSSOCrypt.js"></script>
	<script src="./GK.js"></script>
	<script src="./swSSOIHM.js"></script>
	<script>
		$(document).on("pagebeforechange",function (e,data) { pageChange(e,data); });
	</script>
	<style id="center">
	.center {
		text-align: center;
	}
	</style>
	<style id="aligncenter">
	.aligncenter {
		text-align: center;
	}
	</style>
</head> 

<body> 
	<!-- PAGE 1 : WELCOME -->
	<div data-role="page" id="PageWelcome" style="height: 100% !important; position:relative !important">
		<div data-role="header">
			<h1>swSSO</h1>
		</div><!-- /header -->
		<div data-role="content">	
			<p>Bienvenue !</p>
			<p>Pour commencer, veuillez indiquer l'emplacement de votre fichier swSSO ci-dessous, puis cliquer sur Valider.</p>
			<p>Dans cette version, seuls les fichiers Google Drive sont support&eacute;s. Veuillez renseigner l'id du fichier ci-dessous (uniquement l'id en gras : https://drive.google.com/open?id=<b>23hKRzQ2MdTWAC8URLQZ-g1qqYZR_nKLP)</b></p>
			<input type="text" data-clear-btn="true" name="fileid" id="fileid" value="" autocomplete="off">
			<button onclick="loadJSON()">Valider</button>
			<p>Remarque : vous pourrez mettre &agrave; jour votre fichier ult&eacute;rieurement depuis la page options.</p>
		</div><!-- /content -->
		<div data-role="footer" style="bottom:0; position:absolute !important; top: auto !important; width:100%">
			<h4>Version 0.10.034</h4>
		</div><!-- /footer -->
	</div><!-- /page -->
	
	<!-- PAGE 2 : PASSWORD -->
	<div data-role="page" id="PagePassword" style="height: 100% !important; position:relative !important">
		<div data-role="header">
			<h1>swSSO</h1>
		</div><!-- /header -->
		<div data-role="content">	
<div class="aligncenter">
<img src="./cadenas.png"></img>
</div>			
			<p>Veuillez saisir votre mot de passe pour d&eacute;verrouiller votre coffre :</p>
			<input type="password" data-clear-btn="false" name="password" id="password" value="" autocomplete="off">
			<button onclick="unlockSafe()">D&eacute;verrouiller</button>
			<br/>
			<p>Mot de passe perdu ? Cliquez ci-dessous pour r&eacute;initialiser votre coffre fort.</p>
			<button onclick="restartFromScratch()">R&eacute;initialiser</button>
		</div><!-- /content -->
		<div data-role="footer" style="bottom:0; position:absolute !important; top: auto !important; width:100%">
			<h4>Version 0.10.034</h4>
		</div><!-- /footer -->
	</div><!-- /page -->
	
	<!-- PAGE 3 : SAFE -->
	<div data-role="page" id="PageSafe">
		<div data-role="header">
			<div class="ui-grid-b center">
				<div class="ui-block-a"><button onclick="copyToClipboard('*')" class="ui-btn ui-shadow ui-corner-all ui-btn-icon-top ui-icon-delete ui-btn-inline">&nbsp;Presse-papier&nbsp;</button></div>
				<div class="ui-block-b"><button onclick="lockSafe()" class="ui-btn ui-shadow ui-corner-all ui-btn-icon-top ui-icon-lock ui-btn-inline">&nbsp;&nbsp;&nbsp;&nbsp;Verrouiller&nbsp;&nbsp;&nbsp;&nbsp;</button></div>
				<div class="ui-block-c"><button onclick="showOptions()" class="ui-btn ui-shadow ui-corner-all ui-btn-icon-top ui-icon-gear ui-btn-inline">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Options&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</button></div>
			</div><!-- /ui-grid-b -->
		</div><!-- /header -->
		<div data-role="content">	
			<ul data-role="listview" data-filter="true" data-inset="true" id="appList" data-filter-placeholder="Rechercher...">
			</ul>
		</div><!-- /content -->
	</div><!-- /page -->
	
	<!-- PAGE 4 : OPTIONS -->
	<div data-role="page" id="PageOptions" style="height: 100% !important; position:relative !important">
		<div data-role="header">
			<h1>Options</h1>
		</div><!-- /header -->
		<div data-role="content">	
			<p>Cliquez sur le bouton ci-dessous pour charger une nouvelle version de votre fichier coffre fort :</p>
			<button onclick="restartFromScratch()">R&eacute;initialiser</button>
			<p>S&eacute;lectionnez le d&eacute;lai de verrouillage du coffre (en minutes). Au-del&agrave; de ce d&eacute;lai, votre coffre sera verrouill&eacute; et vous devrez de nouveau saisir votre mot de passe.</p>
			<input type="range" name="sliderPwdTimeout" id="sliderPwdTimeout" min="1" max="60" value="5">
			<br/>
			<button onclick="saveOptions(); $.mobile.navigate('#PageSafe')">Retour</button>
			<br/>
		</div><!-- /content -->
		<div data-role="footer" style="bottom:0; position:absolute !important; top: auto !important; width:100%">
			<h4>Version 0.10.034</h4>
		</div><!-- /footer -->
	</div><!-- /page -->

	<!-- PAGE 5 : APP -->
	<div data-role="page" id="PageApp" style="height: 100% !important; position:relative !important">
		<div data-role="header">
			<h1><span id="PageAppTitle">Titre</span></h1>
		</div><!-- /header -->
		<div data-role="content" id="PageAppButtons">	
		</div><!-- /content -->
		<div data-role="footer" style="bottom:0; position:absolute !important; top: auto !important; width:100%">
			<h4>Version 0.10.034</h4>
		</div><!-- /footer -->
	</div><!-- /page -->

</body>
</html>